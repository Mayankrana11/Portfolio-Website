<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mayank Rana | Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* ===== RESET & BASE ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      /* Default scroll behavior is auto so our custom JS can take over smoothly */
      scroll-behavior: auto;
    }

    body {
      font-family: 'Poppins', sans-serif;
      color: #f5f5f5;
      background-color: #0a0a0a;
      overflow-x: hidden;
      text-align: center;
    }

    /* ===== PARTICLE CANVAS ===== */
    #particleCanvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background: transparent;
      pointer-events: none;
    }

    /* ===== NAVBAR ===== */
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(10, 10, 10, 0.6);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      z-index: 1000;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .nav-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      color: #fff;
      font-weight: 600;
      font-size: 1.4rem;
      letter-spacing: -0.5px;
    }

    .nav-links {
      list-style: none;
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .nav-links a {
      color: #aaa;
      text-decoration: none;
      transition: 0.3s;
      font-size: 0.9rem;
    }

    .nav-links a:hover {
      color: #fff;
    }

    /* ===== CONTENT SECTIONS ===== */
    header, section, footer {
      position: relative;
      z-index: 10;
      /* Offset for fixed navbar during scroll */
      scroll-margin-top: 80px; 
    }

    /* ===== HEADER ===== */
    header {
      padding: 160px 20px 80px;
    }

    header h1 {
      font-size: 3rem;
      font-weight: 600;
      margin-bottom: 10px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-height: 4rem;
    }

    header p {
      color: #888;
      font-size: 1.1rem;
      margin-bottom: 30px;
    }

    /* Resume Button in Header */
    .resume-btn {
      display: inline-block;
      padding: 12px 32px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.02);
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      border-radius: 50px;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      backdrop-filter: blur(10px);
    }

    .resume-btn:hover {
      background: #fff;
      color: #000;
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
      border-color: #fff;
    }

    /* ===== ABOUT ===== */
    #about {
      padding: 100px 20px;
    }

    .about-container {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      gap: 60px;
      max-width: 1000px;
      margin: 0 auto;
    }

    .about-image {
      position: relative;
    }

    .about-image img {
      width: 100%; /* Increased size to accommodate the aura */
      max-width: 320px;
      aspect-ratio: 1 / 1;
      height: auto;
      object-fit: cover;
      /* Aligned to the absolute top of the photo to include hair and full face */
      object-position: center 0%; 
      border-radius: 40%;
      filter: grayscale(100%);
      border: 5px solid rgba(255, 255, 255, 0.1);
      transition: all 0.4s ease;
      position: relative;
      z-index: 2;
    }

    .about-image::after {
      content: "";
      position: absolute;
      top: 15px;
      left: 15px;
      width: 90%; /* Match new image size */
      aspect-ratio: 1 / 1;
      height: 300px;
      /* border: 1px solid rgba(255, 255, 255, 0.1); */
      border-radius: 40%;
      z-index: 1;
      transition: 0.4s;
    }

    .about-image:hover img {
      filter: grayscale(0%);
      transform: translate(-7.5px, -7.5px);
    }

    .about-text {
      max-width: 500px;
      text-align: left;
    }

    .about-text h2 {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: #fff;
    }

    /* ===== CAROUSEL SYSTEM ===== */
    .section-work {
      width: 100%;
      padding: 60px 0;
      overflow: hidden;
    }

    .section-work h2 {
      font-size: 2rem;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 20px;
    }

    .carousel-wrapper {
      position: relative;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel {
      display: flex;
      gap: 40px;
      overflow-x: auto;
      padding: 60px 0;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    /* Experience uses snapping for card-by-card browsing */
    #experienceCarousel {
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
    }

    /* Projects must use behavior: auto for ticker smoothness */
    #projectsCarousel {
      scroll-snap-type: none;
      scroll-behavior: auto !important;
    }

    .carousel::-webkit-scrollbar {
      display: none;
    }

    .project-card {
      flex: 0 0 clamp(280px, 80vw, 500px);
      min-height: 400px;
      background: rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 24px;
      padding: 40px;
      text-align: left;
      scroll-snap-align: center;
      transition: opacity 0.6s ease, transform 0.6s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.6s ease;
      opacity: 1; /* Fully visible */
      transform: scale(0.9);
      user-select: none;
    }

    .project-card.is-center {
      transform: scale(1.15); /* Pop out scale */
      border-color: rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.06);
      box-shadow: 0 25px 60px -12px rgba(0, 0, 0, 0.8), 0 0 30px rgba(255, 255, 255, 0.15);
    }

    .project-card h3 {
      color: #fff;
      font-size: 1.5rem;
      margin-bottom: 10px;
    }

    .project-card em {
      display: block;
      font-style: normal;
      color: #aaa;
      margin-bottom: 20px;
      font-size: 0.9rem;
    }

    .project-card ul {
      list-style: none;
      color: #aaa;
      font-size: 0.95rem;
      line-height: 1.7;
    }

    .project-card ul li::before {
      content: "â€¢";
      margin-right: 10px;
      color: #555;
    }

    .project-link {
      display: inline-block;
      margin-top: 25px;
      padding: 10px 24px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      color: #fff;
      text-decoration: none;
      font-size: 0.85rem;
      transition: 0.3s;
    }

    .project-link:hover {
      background: #fff;
      color: #000;
    }

    /* Navigation Buttons */
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(10, 10, 10, 0.6);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #fff;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 50;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .carousel-btn:hover {
      background: #fff;
      color: #000;
      transform: translateY(-50%) scale(1.1);
    }

    .carousel-btn.left { left: 5%; }
    .carousel-btn.right { right: 5%; }

    /* Centering calculation */
    #experienceCarousel {
      padding-left: calc(50% - 250px);
      padding-right: calc(50% - 250px);
    }

    /* ===== SKILLS ===== */
    #skills {
      padding: 80px 20px;
    }

    /* Increased size, uppercase, and spacing to match PROFESSIONAL EXPERIENCE */
    #skills h2 {
      font-size: 2rem;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 40px; /* One line space */
    }

    #skills ul {
      list-style: none;
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* Strict max 3 in a row */
      gap: 15px;
      max-width: 1000px;
      margin: 0 auto;
    }

    #skills li {
      background: rgba(255, 255, 255, 0.03);
      padding: 12px 22px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      color: #aaa;
      font-size: 0.9rem;
      transition: 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #skills li:hover {
      border-color: #fff;
      color: #fff;
      transform: translateY(-4px);
      background: rgba(255, 255, 255, 0.06);
    }

    /* ===== TYPEWRITER ===== */
    .typewriter-cursor {
      display: inline-block;
      width: 3px;
      height: 3rem;
      background-color: #fff;
      margin-left: 10px;
      animation: blink 0.8s infinite;
    }

    /* ===== HAMBURGER MENU ===== */
    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      background: none;
      border: none;
      cursor: pointer;
    }

    .hamburger span {
      width: 24px;
      height: 2px;
      background: #fff;
      border-radius: 2px;
    }

    /* ===== MOBILE DROPDOWN ===== */
    .mobile-menu {
      position: fixed;
      top: 64px; /* navbar height */
      left: 0;
      width: 100%;
      background: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(14px);
      border-bottom: 1px solid rgba(255,255,255,0.08);
      display: flex;
      flex-direction: column;
      gap: 18px;
      padding: 25px 30px;
      transform: translateY(-120%);
      transition: transform 0.35s ease;
      z-index: 999;
    }

    .mobile-menu a {
      color: #ddd;
      text-decoration: none;
      font-size: 1rem;
    }

    .mobile-menu a:hover {
      color: #fff;
    }

    .mobile-menu.open {
      transform: translateY(0);
    }

    /* ===== MOBILE ONLY ===== */
    @media (max-width: 640px) {
      .nav-links {
        display: none;
      }
      .hamburger {
        display: flex;
      }
    }

    @keyframes blink { 50% { opacity: 0; } }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 1024px) {
      .project-card { flex: 0 0 85vw; }
      .carousel-btn { width: 45px; height: 45px; font-size: 1.2rem; }
      #experienceCarousel {
        padding-left: 7.5vw;
        padding-right: 7.5vw;
      }
      #skills ul {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      header h1 { font-size: 2.2rem; }
      .carousel-btn { display: none; }
      .about-container { flex-direction: column; }
      .about-image img, .about-image::after {
        width: 300px;
        height: 300px;
      }
      #skills ul {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<canvas id="particleCanvas"></canvas>

<nav class="navbar">
  <div class="nav-container">
    <div class="logo">Mayank Rana</div>

    <ul class="nav-links">
      <li><a href="#about">About</a></li>
      <li><a href="#skills">Skills</a></li>
      <li><a href="#experience">Experience</a></li>
      <li><a href="#projects">Projects</a></li>
      <li><a href="MayankRana_Resume.pdf" download>Resume</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>

    <!-- HAMBURGER -->
    <button class="hamburger" aria-label="Menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</nav>

<!-- MOBILE MENU -->
<div class="mobile-menu">
  <a href="#about">About</a>
  <a href="#skills">Skills</a>
  <a href="#experience">Experience</a>
  <a href="#projects">Projects</a>
  <a href="MayankRana_Resume.pdf" download>Resume</a>
  <a href="contact.html">Contact</a>
</div>

<header>
  <h1 id="typewriter-hello"></h1>
  <p>B.Tech Sophomore at IIITD | Always Learning, Always Building ðŸš€</p>
  <!-- Updated Download Resume Header Button with correct filename -->
  <a href="MayankRana_Resume.pdf" download class="resume-btn">Download Resume</a>
</header>

<section id="about">
  <div class="about-container">
    <div class="about-image">
      <img src="portfolio.jpg" alt="Mayank Rana" onerror="this.src='https://via.placeholder.com/300?text=Mayank+Rana'">
    </div>
    <div class="about-text">
      <h2>About Me</h2>
      <p style="color: #ccc; line-height: 1.6; margin-bottom: 15px;">
        I am a curious learner and a passionate B.Tech student who thrives on building thoughtful, data-driven, and elegant digital experiences.
      </p>
      <p style="color: #888; line-height: 1.6;">
        Currently diving into full-stack development with express-react and other modern web technologies. Beyond coding, I enjoy cinematic design using Unreal Engine 5 where creativity meets technology. Iâ€™m passionate about solving problems that balance logic and imagination, and Iâ€™m always eager to learn something new.
      </p>
    </div>
  </div>
</section>

<section id="skills">
  <h2>Technical Skillset</h2>
  <ul>
    <li>Data Structures & Algorithms</li>
    <li>Java - Object Oriented Programming</li>
    <li>JavaScript / TypeScript</li>
    <li>Python Â· C Â· C++</li>
    <li>React Â· Next.js Â· Node.js</li>
    <li>Firebase Â· MySQL Â· REST APIs</li>
    <li>OCR Â· NLP - Hugging Face</li>
    <li>Vercel Â· Netlify Â· Render</li>
    <li>UE5 Â· After Effects Â· Premiere Pro Â· Filmora Â· Figma</li>
  </ul>
</section>

<!-- EXPERIENCE SECTION -->
<section id="experience" class="section-work">
  <h2>Professional Experience</h2>
  <div class="carousel-wrapper">
    <button class="carousel-btn left" data-carousel="experienceCarousel">&#10094;</button>
    <div class="carousel" id="experienceCarousel">
      
      <div class="project-card">
        <h3>SWE Intern â€“ DRDO (SSPL)</h3>
        <em>May 2025 â€“ June 2025</em>
        <ul>
          <li>Confidential AI-powered document intelligence system</li>
          <li>Python Flask backend for chatbot APIs</li>
          <li>OCR & NLP pipelines for scanned documents</li>
          <li>Semantic search using Sentence Transformers + FAISS</li>
        </ul>
      </div>

      <div class="project-card">
        <h3>Full Stack Developer â€“ PACE NGO</h3>
        <em>Sept 2025 â€“ Dec 2025</em>
        <ul>
          <li>Child & Family Tracking System for NGO operations</li>
          <li>Role-based UI using Next.js & React</li>
          <li>Firebase Auth, Firestore & Storage</li>
          <li>Google Maps integration for field visits</li>
        </ul>
        <a href="https://github.com/Mayankrana11/NGO-Tracker-App-Community-Compass-.git" target="_blank" class="project-link">GitHub â†’</a>
      </div>

    </div>
    <button class="carousel-btn right" data-carousel="experienceCarousel">&#10095;</button>
  </div>
</section>

<!-- PROJECTS SECTION -->
<section id="projects" class="section-work">
  <h2>Projects (Personal & Academic)</h2>
  <div class="carousel-wrapper">
    <button class="carousel-btn left" data-carousel="projectsCarousel">&#10094;</button>
    <div class="carousel" id="projectsCarousel">
      
      <div class="project-card">
        <h3>Manas+</h3>
        <em>AI-Based Health Assistance System</em>
        <ul>
          <li>AI health LLaMA-3 Local Inference via Ollama</li>
          <li>Camera-based OCR and microphone-enabled voice queries for interaction</li>
          <li>Full-stack architecture with React, Node.js, and Firebase</li>
          <li>User profiles, chat history, and guest/admin access control</li>
          <li>Modern, extensible UI with subscription and auth-ready design</li>
        </ul>
        <a href="https://github.com/Mayankrana11/ManasAi" target="_blank" class="project-link">GitHub â†’</a>
      </div>

      <div class="project-card">
        <h3>Anomaly Detector</h3>
        <em>AI CCTV Incident Detection System</em>
        <ul>
          <li>Azure Vision & Anomaly Detector for real-time incident detection</li>
          <li>Azure OpenAI for incident severity classification and explanations</li>
          <li>Preprocessing pipeline using FFmpeg & Jimp for video frame extraction</li>
          <li>Real-time alerts and dashboard for proactive safety monitoring</li>
        </ul>
        <a href="https://github.com/Mayankrana11/IC26-ANOMALY_DETECTOR.git" target="_blank" class="project-link">GitHub â†’</a>
      </div>

      <div class="project-card">
        <h3>Haru no Yorokobi</h3>
        <em>Japanese Restaurant POS System</em>
        <ul>
          <li>Tablet-based customer ordering with category browsing & multiple payment mode</li>
          <li>Real-time staff dashboard with order lifecycle tracking (NEW â†’ COMPLETED)</li>
          <li>Snapshot-based order modeling with backend as single source of truth with respect to menu allocation</li>
          <li>Full-stack React + Node/Express architecture simulating real POS workflows</li>
        </ul>
        <a href="https://github.com/Mayankrana11/Restaurant-POS-System.git" target="_blank" class="project-link">GitHub â†’</a>
      </div>

      <div class="project-card">
        <h3>University ERP</h3>
        <em>Java GUIâ€“Based Academic ERP System</em>
        <ul>
          <li>Desktop ERP built with Java Swing and JDBC for university operations</li>
          <li>Role-based access for Students, Instructors, and Administrators</li>
          <li>Secure MySQL-backed architecture with separate authentication database</li>
          <li>Supports course registration, grade management, and admin oversight</li>
        </ul>
        <a href="https://github.com/Mayankrana11/University-ERP.git" target="_blank" class="project-link">GitHub â†’</a>
      </div>

      <div class="project-card">
        <h3>Fleet Management System GUI</h3>
        <em>Fleet Management & Highway Simulation System</em>
        <ul>
          <li>Object-oriented fleet management with vehicle hierarchies and interfaces</li>
          <li>Multithreaded highway simulation with per-vehicle threads</li>
          <li>Race condition demonstration and fix using synchronized counters</li>
          <li>Interactive Swing GUI with real-time simulation controls and CSV persistence</li>
        </ul>
        <a href="https://github.com/Mayankrana11/Fleet-Management-System-GUI.git" target="_blank" class="project-link">GitHub â†’</a>
      </div>

      <div class="project-card">
        <h3>RV32I Emulation Suite</h3>
        <em>Python-Based RV32I Assembler & Simulator</em>
        <ul>
          <li>Custom Python assembler converting RV32I assembly to 32-bit machine code</li>
          <li>Cycle-accurate simulator with registers, memory, and PC execution flow</li>
          <li>Supports core RV32I instruction formats with labels and immediates</li>
          <li>R, I, S, B & J Type Instructions</li>
        </ul>
        <a href="https://github.com/Mayankrana11/RV32I-Emulation-Suite.git" target="_blank" class="project-link">GitHub â†’</a>
      </div>

      <div class="project-card">
        <h3>Operating Systems Projects</h3>
        <em>Linux Based Restricted Projects</em>
        <ul>
          <li>EGOS-2000 â€”> Simple Operating System</li>
          <li>Simple Unix Terminal â€”> Custom Unix Shell</li>
          <li>Simple Loader â€”> ELF Program Loader</li>
          <li>Simple Smart Loader â€”> Lazy-Loading ELF Loader</li>
          <li>Simple Scheduler â€”> Round Robin CPU Scheduler</li>
          <li>Simple Multithreader â€”> POSIX Parallel Loop Library</li>
        </ul>
      </div>

    </div>
    <button class="carousel-btn right" data-carousel="projectsCarousel">&#10095;</button>
  </div>
</section>

<section id="contact-display" style="padding: 100px 20px;">
  <h2>Contact</h2>
  <p style="margin-bottom: 20px; color: #aaa;">
    <a href="mailto:work.mayankrana11@gmail.com" style="color: #fff; text-decoration: none;">work.mayankrana11@gmail.com</a><br>
    <a href="mailto:mayank24341@iiitd.ac.in" style="color: #fff; text-decoration: none;">mayank24341@iiitd.ac.in</a>
  </p>
  <p style="color: #666; font-size: 0.9rem;">
    <a href="https://github.com/Mayankrana11" target="_blank" style="color: #888; text-decoration: none;">GitHub</a> Â· 
    <a href="https://www.linkedin.com/in/mayank-rana-101355322/" target="_blank" style="color: #888; text-decoration: none;">LinkedIn</a>
  </p>
</section>

<footer style="padding: 60px 40px; border-top: 1px solid #111; color: #444;">
  Â© 2025 Mayank Rana Â· Last Updated : 31st Dec 2025
</footer>

<script>
(function() {
  "use strict";

  // --- CUSTOM ULTRA-SMOOTH SCROLL ENGINE ---
  function smoothScrollTo(targetSelector, duration) {
    const target = document.querySelector(targetSelector);
    if (!target) return;

    const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - 80;
    const startPosition = window.pageYOffset;
    const distance = targetPosition - startPosition;
    let startTime = null;

    function animation(currentTime) {
      if (startTime === null) startTime = currentTime;
      const timeElapsed = currentTime - startTime;
      const progress = Math.min(timeElapsed / duration, 1);
      
      // Easing function: easeInOutCubic
      const ease = progress < 0.5 
        ? 4 * progress * progress * progress 
        : 1 - Math.pow(-2 * progress + 2, 3) / 2;

      window.scrollTo(0, startPosition + (distance * ease));

      if (timeElapsed < duration) {
        requestAnimationFrame(animation);
      }
    }
    requestAnimationFrame(animation);
  }

  // Bind to nav links
  document.querySelectorAll('.nav-links a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      smoothScrollTo(targetId, 1200); // 1.2s for high-end cinematic feel
    });
  });

  // --- PARTICLE ENGINE ---
  const canvas = document.getElementById("particleCanvas");
  const ctx = canvas.getContext("2d");
  let particles = [];
  let width, height;

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    initParticles();
  }

  class Particle {
    constructor() {
      this.x = Math.random() * width;
      this.y = Math.random() * height;
      this.vx = (Math.random() - 0.5) * 0.5;
      this.vy = (Math.random() - 0.5) * 0.5;
      this.radius = Math.random() * 1.5;
    }
    update() {
      this.x += this.vx;
      this.y += this.vy;
      if (this.x < 0 || this.x > width) this.vx *= -1;
      if (this.y < 0 || this.y > height) this.vy *= -1;
    }
    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fillStyle = "rgba(255, 255, 255, 0.4)";
      ctx.fill();
    }
  }

  function initParticles() {
    particles = [];
    const count = Math.floor((width * height) / 10000);
    for (let i = 0; i < count; i++) particles.push(new Particle());
  }

  function animateParticles() {
    ctx.clearRect(0, 0, width, height);
    particles.forEach(p => {
      p.update();
      p.draw();
    });
    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        if (dist < 100) {
          ctx.beginPath();
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.strokeStyle = `rgba(255, 255, 255, ${0.1 * (1 - dist / 100)})`;
          ctx.lineWidth = 0.5;
          ctx.stroke();
        }
      }
    }
    requestAnimationFrame(animateParticles);
  }

  /* ===== HAMBURGER LOGIC ===== */
  const hamburger = document.querySelector(".hamburger");
  const mobileMenu = document.querySelector(".mobile-menu");

  hamburger.addEventListener("click", () => {
    mobileMenu.classList.toggle("open");
  });

  mobileMenu.querySelectorAll("a[href^='#']").forEach(link => {
    link.addEventListener("click", function (e) {
      e.preventDefault();

      const targetId = this.getAttribute("href");

      // use your existing cinematic scroll
      smoothScrollTo(targetId, 1200);

      // close hamburger menu
      mobileMenu.classList.remove("open");
    });
  });

  window.addEventListener("resize", () => {
    if (window.innerWidth > 640) {
      mobileMenu.classList.remove("open");
    }
  });


  // --- TYPEWRITER ---
  function initTypewriter() {
    const target = document.getElementById("typewriter-hello");
    const text = "HELLO, I'M MAYANK RANA";
    let i = 0;
    if (!target) return;
    target.innerHTML = '';
    const cursor = document.createElement("span");
    cursor.className = "typewriter-cursor";
    
    function type() {
      if (i < text.length) {
        target.insertBefore(document.createTextNode(text.charAt(i)), cursor);
        i++;
        setTimeout(type, 100);
      }
    }
    target.appendChild(cursor);
    setTimeout(type, 800);
  }

  // --- CAROUSEL LOGIC ---
  const projectsCarousel = document.getElementById("projectsCarousel");
  const expCarousel = document.getElementById("experienceCarousel");
  let projectsMeta = null;

  function setupInfiniteCarousel(carousel) {
    if (!carousel) return;
    
    const originalCards = Array.from(carousel.children);
    const cardWidth = originalCards[0].offsetWidth + 40; 
    
    // Clone cards for infinite effect
    originalCards.forEach(card => {
      const clone = card.cloneNode(true);
      carousel.appendChild(clone);
    });
    originalCards.slice().reverse().forEach(card => {
      const clone = card.cloneNode(true);
      carousel.insertBefore(clone, carousel.firstChild);
    });

    const totalWidth = originalCards.length * cardWidth;
    carousel.scrollLeft = totalWidth;

    function handleInfiniteScroll() {
      const scrollPos = carousel.scrollLeft;
      if (scrollPos >= totalWidth * 2) {
        carousel.scrollLeft = scrollPos - totalWidth;
      } 
      else if (scrollPos <= 0) {
        carousel.scrollLeft = scrollPos + totalWidth;
      }
      updateActiveCard(carousel);
    }

    carousel.addEventListener("scroll", handleInfiniteScroll);
    updateActiveCard(carousel);
    
    carousel.style.paddingLeft = `calc(50% - 250px)`;
    carousel.style.paddingRight = `calc(50% - 250px)`;

    return { totalOriginalWidth: totalWidth };
  }

  function updateActiveCard(carousel) {
    const cards = carousel.querySelectorAll(".project-card");
    const carouselCenter = carousel.scrollLeft + carousel.offsetWidth / 2;
    cards.forEach(card => {
      const cardCenter = card.offsetLeft + card.offsetWidth / 2;
      const distance = Math.abs(carouselCenter - cardCenter);
      if (distance < 150) {
        card.classList.add("is-center");
      } else {
        card.classList.remove("is-center");
      }
    });
  }

  // --- SMOOTH TICKER AUTO-SCROLL ---
  let projectsAutoScrollActive = true;
  let isInteracting = false;
  const scrollSpeed = 0.5; // Slow elegant glide
  let currentScroll = 0;

  function continuousAutoScroll() {
    if (projectsCarousel && projectsAutoScrollActive && !isInteracting) {
      currentScroll += scrollSpeed;
      
      const totalWidth = projectsMeta.totalOriginalWidth;
      if (currentScroll >= totalWidth * 2) {
        currentScroll -= totalWidth;
      }
      
      projectsCarousel.scrollLeft = currentScroll;
    } else if (projectsCarousel) {
      currentScroll = projectsCarousel.scrollLeft;
    }
    requestAnimationFrame(continuousAutoScroll);
  }

  // Initialize
  projectsMeta = setupInfiniteCarousel(projectsCarousel);
  if (projectsCarousel) currentScroll = projectsCarousel.scrollLeft;

  if (expCarousel) {
    expCarousel.addEventListener("scroll", () => updateActiveCard(expCarousel));
    updateActiveCard(expCarousel);
  }

  // Interaction handlers
  projectsCarousel.addEventListener("mouseenter", () => { isInteracting = true; });
  projectsCarousel.addEventListener("mouseleave", () => { isInteracting = false; });
  projectsCarousel.addEventListener("touchstart", () => { isInteracting = true; }, {passive: true});
  projectsCarousel.addEventListener("touchend", () => { 
    setTimeout(() => { isInteracting = false; }, 3000); 
  }, {passive: true});

  // Navigation logic
  const buttons = document.querySelectorAll(".carousel-btn");
  buttons.forEach(btn => {
    btn.addEventListener("click", () => {
      const targetId = btn.getAttribute("data-carousel");
      const carousel = document.getElementById(targetId);
      const card = carousel.querySelector(".project-card");
      const cardWidth = card.offsetWidth + 40;
      const direction = btn.classList.contains("right") ? 1 : -1;
      
      carousel.scrollBy({ left: cardWidth * direction, behavior: "smooth" });

      if (targetId === "projectsCarousel") {
        isInteracting = true;
        clearTimeout(window.resumeTimer);
        window.resumeTimer = setTimeout(() => { isInteracting = false; }, 8000);
      }
    });
  });

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      projectsAutoScrollActive = entry.isIntersecting;
    });
  }, { threshold: 0.05 });
  
  if (projectsCarousel) observer.observe(document.getElementById("projects"));

  window.addEventListener("load", () => {
    resize();
    animateParticles();
    initTypewriter();
    continuousAutoScroll();
  });
  window.addEventListener("resize", resize);

})();
</script>
</body>
</html>